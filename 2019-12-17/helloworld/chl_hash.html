<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>hash</title>
</head>

<body>
    <button>1111</button>
    <button>2222</button>
    <button>3333</button>
    <p id="p">第一张图</p>
    <input type="button" value="前进" id="nextbtn">
    <input type="button" value="后退" id="prebtn">
</body>
<script>
    let ary = ['第一张图片', '第二张图片', '第三张图片'];
    const btns = document.querySelectorAll('button');
    let hash = window.location.hash;

    let index = 0;
    if (hash) {
        index = window.location.hash.match(/page\/(\d)/)[1];
        p.innerHTML = ary[index];
    } else {
        window.location.hash = 'page/0';
    }
    btns.forEach((ele,i)=>{
        ele.onclick=function(){
            p.innerHTML=ary[i];
            window.location.hash='page/'+i
        }
    })
    prebtn.onclick=function(){
        console.log(index)
        index--;
        if(index<0){
            index=0;
        }
        p.innerHTML=ary[index];
        window.location.hash='page/'+index;
       
    }
    nextbtn.onclick=function(){
        index++;
        if(index>ary.length-1){
            index=ary.length-1;
        }
        p.innerHTML=ary[index];
        window.location.hash='page/'+index;
    }
    window.onhashchange=function(){
        if(hash){
            index=window.location.hash.match(/page\/(\d)/)[1];
            p.innerHTML=ary[index];
        }
    }
</script>

</html>